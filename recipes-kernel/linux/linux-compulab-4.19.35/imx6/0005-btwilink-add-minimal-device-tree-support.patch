From ddbd74512b453a664862218dc05b61b864176288 Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Fri, 15 Apr 2022 09:02:33 +0300
Subject: [PATCH 05/11] btwilink: add minimal device tree support

Add minimal device tree support to the btwilink driver that is used
for binding bluetooth with the ti-st shared transport driver.
---
 drivers/bluetooth/btwilink.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/drivers/bluetooth/btwilink.c b/drivers/bluetooth/btwilink.c
index 5ef8000f90a9..290969a66866 100644
--- a/drivers/bluetooth/btwilink.c
+++ b/drivers/bluetooth/btwilink.c
@@ -30,6 +30,7 @@
 
 #include <linux/ti_wilink_st.h>
 #include <linux/module.h>
+#include <linux/of.h>
 
 /* Bluetooth Driver Version */
 #define VERSION               "1.0"
@@ -332,11 +333,21 @@ static int bt_ti_remove(struct platform_device *pdev)
 	return 0;
 }
 
+static const struct of_device_id btwilink_of_match[] = {
+{
+	.compatible = "btwilink",
+	},
+	{}
+};
+MODULE_DEVICE_TABLE(of, btwilink_of_match);
+
 static struct platform_driver btwilink_driver = {
 	.probe = bt_ti_probe,
 	.remove = bt_ti_remove,
 	.driver = {
 		.name = "btwilink",
+		.owner = THIS_MODULE,
+		.of_match_table = of_match_ptr(btwilink_of_match),
 	},
 };
 
-- 
2.17.1

